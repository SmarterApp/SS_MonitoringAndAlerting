/*******************************************************************************
 * Educational Online Test Delivery System
 * Copyright (c) 2013 American Institutes for Research
 * 
 * Distributed under the AIR Open Source License, Version 1.0
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.shared.monitoringalerting.persistence;

import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.CoreMatchers.notNullValue;
import static org.hamcrest.MatcherAssert.assertThat;

import java.util.List;

import org.junit.Test;
import org.opentestsystem.shared.monitoringalerting.AbstractPersistenceEmbeddedTest;
import org.opentestsystem.shared.monitoringalerting.domain.DiscreteIntake;
import org.opentestsystem.shared.monitoringalerting.domain.DiscreteIntake.TYPE;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;

public class DiscreteIntakeRepositoryIntegrationTest extends AbstractPersistenceEmbeddedTest {

    @SuppressWarnings("unused")
    private static final Logger LOGGER = LoggerFactory.getLogger(DiscreteIntakeRepositoryIntegrationTest.class);

    @Autowired
    private DiscreteIntakeRepository alertRepository;

    @Test
    public void insertDiscreteIntake() {
        final DiscreteIntake retDiscreteIntake = this.alertRepository.save(new DiscreteIntake(TYPE.ALERT, "BAKED_APPLE_PIE"));
        assertThat(retDiscreteIntake.getId(), is(notNullValue()));
    }

    @Test
    public void testFindByType() {
        this.alertRepository.save(new DiscreteIntake(TYPE.ALERT, "BAKED_APPLE_PIE"));

        final List<DiscreteIntake> retrievedList = this.alertRepository.findByType(TYPE.ALERT);
        assertThat(retrievedList.size(), is(1));
    }
}
